name: Copy Secrets from 1dream

on:
  workflow_dispatch:
  # RuleazÄƒ o singurÄƒ datÄƒ pentru a copia secretele

jobs:
  copy-secrets:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout xcited repo
        uses: actions/checkout@v4
        with:
          repository: Iulianc123/xcited
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Setup GitHub CLI
        run: |
          gh auth setup-git
          gh auth status

      - name: List secrets from 1dream
        run: |
          echo "ğŸ“‹ Secrete disponibile Ã®n 1dream:"
          gh secret list --repo Iulianc123/1DREAM || echo "âš ï¸  Nu pot lista secretele (necesitÄƒ permisiuni)"

      - name: Copy CWP secrets from 1dream to xcited
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          # Lista de secrete de copiat
          SECRETS=("CWP_HOST" "CWP_USER" "CWP_SSH_KEY" "CWP_PORT")
          
          for SECRET in "${SECRETS[@]}"; do
            echo "ğŸ”„ Copiere $SECRET..."
            
            # ÃncearcÄƒ sÄƒ obÈ›inÄƒ valoarea secretului din 1dream
            # NOTÄ‚: GitHub API nu permite citirea valorilor secretelor criptate
            # Trebuie sÄƒ folosim o altÄƒ metodÄƒ
            
            # AlternativÄƒ: folosim GitHub CLI pentru a crea secretul Ã®n xcited
            # dar trebuie sÄƒ avem valoarea (nu o putem citi din 1dream)
            
            echo "âš ï¸  Nu pot citi valoarea secretului $SECRET din 1dream (secretele sunt criptate)"
            echo "   Trebuie sÄƒ adaugi manual secretul Ã®n xcited"
          done
          
          echo ""
          echo "âœ… Pentru a copia secretele, foloseÈ™te GitHub CLI manual:"
          echo "   gh secret set CWP_HOST --repo Iulianc123/xcited"
          echo "   (repetÄƒ pentru fiecare secret)"

